# ğŸ¨ Shared Header with Avatar - Quick Start

Your shared header is now configured to show user avatars when logged in!

## âœ… What's Been Created

1. **`/api/auth/check.php`** - SSO endpoint that returns user auth status
2. **`sharedheader-config.js`** - Configuration for the shared header
3. **`sharedheader-include.php`** - Easy PHP template for including the header
4. **`test_sharedheader.php`** - Test page to verify everything works
5. **`install-sharedheader.sh`** - Script to install the shared header files

## ğŸš€ Installation (3 Simple Steps)

### Step 1: Install Shared Header Files

Run the installation script:
```bash
cd /Applications/XAMPP/xamppfiles/htdocs/loginveerles
./install-sharedheader.sh
```

Or manually clone:
```bash
git clone https://github.com/ChazBeck/sharedheader.git sharedheader
```

### Step 2: Test It Works

Visit the test page:
```
http://localhost/apps/auth/test_sharedheader.php
```

**When logged out:** You should see "Login" button in header
**When logged in:** You should see your avatar with your name in header

### Step 3: Add to Your Apps

Use one of these methods in your applications:

**Method A: PHP Include (Easiest)**
```php
<!DOCTYPE html>
<html>
<head>
    <title>My App</title>
</head>
<body>
    <?php require_once '/apps/auth/sharedheader-include.php'; ?>
    
    <div class="content">
        <!-- Your app content -->
    </div>
</body>
</html>
```

**Method B: Manual HTML**
```html
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/sharedheader/header.css">
</head>
<body>
    <!-- Header HTML (copy from sharedheader-include.php) -->
    
    <script src="/apps/auth/sharedheader-config.js"></script>
    <script src="/sharedheader/header.js"></script>
</body>
</html>
```

## ğŸ¯ How It Works

1. **User logs in** â†’ JWT token stored in cookie
2. **Page loads** â†’ Shared header JavaScript runs
3. **JavaScript calls** `/api/auth/check.php` â†’ Returns user data
4. **Header updates** â†’ Shows avatar with user's name
5. **User clicks avatar** â†’ Custom action (configurable)
6. **User clicks logout** â†’ Calls `/apps/auth/logout.php`

## ğŸ¨ Avatar Display

The avatar is automatically generated using the user's first and last name:
- **John Doe** â†’ Shows "JD" on purple background
- No profile picture needed!
- Generated by [UI Avatars](https://ui-avatars.com/)

### Want to use custom avatars?

See [SHAREDHEADER_INTEGRATION.md](SHAREDHEADER_INTEGRATION.md#change-avatar-generation) for:
- Using Gravatar
- Uploading custom profile pictures
- Changing avatar colors/style

## ğŸ”§ Customization

Edit [sharedheader-config.js](sharedheader-config.js) to customize:

```javascript
window.sharedHeaderConfig = {
    logoUrl: '/path/to/logo.png',      // Your logo
    logoText: 'My Company Name',       // Company name
    logoLink: '/',                     // Home page
    
    // What happens when user clicks their avatar
    onAvatarClick: (userData) => {
        window.location.href = '/profile.php';
    }
};
```

## ğŸ“ Files Created

```
/Applications/XAMPP/xamppfiles/htdocs/loginveerles/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ auth/
â”‚       â””â”€â”€ check.php                    â† SSO endpoint
â”œâ”€â”€ sharedheader-config.js               â† Configuration
â”œâ”€â”€ sharedheader-include.php             â† PHP template
â”œâ”€â”€ test_sharedheader.php                â† Test page
â”œâ”€â”€ install-sharedheader.sh              â† Install script
â”œâ”€â”€ SHAREDHEADER_INTEGRATION.md          â† Full documentation
â””â”€â”€ SHAREDHEADER_QUICKSTART.md           â† This file
```

## ğŸ› Troubleshooting

**Avatar not showing?**
1. Verify you're logged in
2. Open browser DevTools â†’ Console tab
3. Check for JavaScript errors
4. Test the endpoint: `curl http://localhost/apps/auth/api/auth/check.php`

**404 errors?**
1. Make sure you ran `./install-sharedheader.sh`
2. Check files exist in `/sharedheader/` directory
3. Verify file paths in your HTML

**Still need help?**
1. Visit [test_sharedheader.php](test_sharedheader.php) and run the built-in tests
2. Read [SHAREDHEADER_INTEGRATION.md](SHAREDHEADER_INTEGRATION.md) for detailed docs
3. Check browser console and network tab for errors

## ğŸ“ Next Steps

1. âœ… Install shared header files (`./install-sharedheader.sh`)
2. âœ… Test on test page (`test_sharedheader.php`)
3. âœ… Add to your first application
4. âœ… Customize colors/styling to match your brand
5. âœ… Roll out to all your applications

## ğŸ“š More Information

- **Full Integration Guide:** [SHAREDHEADER_INTEGRATION.md](SHAREDHEADER_INTEGRATION.md)
- **GitHub Repository:** https://github.com/ChazBeck/sharedheader
- **Test Page:** http://localhost/apps/auth/test_sharedheader.php

---

**Questions?** Check the troubleshooting section or read the full integration guide.
